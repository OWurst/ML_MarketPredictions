---
title: "CS 2075 Spring 2023 Final Project: Part 3: Classification"
author: "Owen Wurst"
date: "Started January 3rd, 2024"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, imports}
library(tidyverse)
source("Data_Prep_Functions.r")
```

#Data Preparation:
##Reading in Data:
I will start by reading the csv files for all of the data. I will add a column for ticker and industry to each df.
```{r, create_df_list}
apple <- readr::read_csv("Original_Datasets/YahooFinance/AAPL.csv", col_names = TRUE, show_col_types = FALSE)
appl_df <- prep_df_post_csv_read(apple, "APPL", "Tech")

jnj <- readr::read_csv("Original_Datasets/YahooFinance/JNJ.csv", col_names = TRUE, show_col_types = FALSE)
jnj_df <- prep_df_post_csv_read(jnj, "JNJ", "Pharma")

jpmorg <- readr::read_csv("Original_Datasets/YahooFinance/JPM.csv", col_names = TRUE, show_col_types = FALSE)
jpm_df <- prep_df_post_csv_read(jpmorg, "JPM", "Banking")

moderna <- readr::read_csv("Original_Datasets/YahooFinance/MRNA.csv", col_names = TRUE, show_col_types = FALSE)
mrna_df <- prep_df_post_csv_read(moderna, "MRNA", "Pharma")

mandt <- readr::read_csv("Original_Datasets/YahooFinance/MTB.csv", col_names = TRUE, show_col_types = FALSE)
mtb_df <- prep_df_post_csv_read(mandt, "MTB", "Banking")

nvidia <- readr::read_csv("Original_Datasets/YahooFinance/NVDA.csv", col_names = TRUE, show_col_types = FALSE)
nvda_df <- prep_df_post_csv_read(nvidia, "NVDA", "Tech")

target <- readr::read_csv("Original_Datasets/YahooFinance/JPM.csv", col_names = TRUE, show_col_types = FALSE)
tgt_df <- prep_df_post_csv_read(target, "TGT", "Retail")

wmt <- readr::read_csv("Original_Datasets/YahooFinance/WMT.csv", col_names = TRUE, show_col_types = FALSE)
wmt_df <- prep_df_post_csv_read(wmt, "WMT", "Retail")

stock_df_list <- c(appl_df, jnj_df, jpm_df, mrna_df, mtb_df, nvda_df, tgt_df, wmt_df)
```

After that, we have a list of 8 dataframes that look like this.
```{r, show_apple}
head(appl_df)
```

##Creating Individual Lines for Learning
I am now going to create dataframes where each line represents an 8 month period of changes for every line that I can in these dateframes.

```{r, create_learning_df}
k_month_learning_df_from_adjusted <- function(df, k){
  
  i <- 0
  while(i+k+1 < nrow(df)){
    
    
    
    i <- i+1
  }
  
  colnames_adj_percent <- paste0("Adj_%_Change", 1:k)
  colnames_percent <- paste0("%_Change", 1:k)
  colnames_vol <- paste0("Volume", 1:k)
  
  adj_perc_df <- data.frame(matrix(NA, nrow = 1, ncol = k, dimnames = list(NULL, colnames_adj_percent)))
  perc_df <- data.frame(matrix(NA, nrow = 1, ncol = k, dimnames = list(NULL, colnames_percent)))
  vol_df <- data.frame(matrix(NA, nrow = 1, ncol = k, dimnames = list(NULL, colnames_vol)))
  
  const_columns <- data.frame(
    Ticker = df$Ticker[1],
    Industry = df$Industry[1]
  )
  
  learning_df <- cbind(const_columns, adj_perc_df, perc_df, vol_df)
  return(learning_df)
}
```


```{r, appl_learning_df}
k_month_learning_df_from_adjusted(tgt_df, 8)
```

